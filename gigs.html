<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Google Tag Manager -->
  <script>(function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({
        'gtm.start':
          new Date().getTime(), event: 'gtm.js'
      }); var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
          'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-N5LD92Z5');</script>
  <!-- End Google Tag Manager -->

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GIGS & RESIDENCIES - JAVI BEAT | Dubai DJ Schedule</title>

  <link rel="icon" type="image/png" href="img/favicon.png">

  <!-- Optimized Font Loading -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Syne:wght@400;500;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap"
    rel="stylesheet">

  <!-- Main Stylesheet -->
  <link rel="stylesheet" href="assets/css/styles.css">

  <!-- Deferred non-critical CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" media="print"
    onload="this.media='all'">
  <noscript>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  </noscript>

  <!-- PERFECT AI SEO & SEO OPTIMIZATION -->
  <meta name="description"
    content="Official schedule for JAVI BEAT. Catch his residencies at AURA Skypool, Drift Beach Club, and Azure Beach. Stay updated with the premier DJ schedule in Dubai.">
  <meta name="ai-content-summary"
    content="This page lists the upcoming performance schedule and residencies for DJ Javi Beat in Dubai. Key locations include Drift Beach, AURA Skypool, and Azure Beach.">

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "EventSeries",
    "name": "Javi Beat Dubai Residencies",
    "description": "Weekly performance series at Dubai's most exclusive venues.",
    "performer": {
      "@type": "Person",
      "name": "Javi Beat"
    },
    "location": [
      { "@type": "Place", "name": "Drift Beach Club" },
      { "@type": "Place", "name": "AURA Skypool" },
      { "@type": "Place", "name": "Azure Beach" }
    ]
  }
  </script>
</head>

<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N5LD92Z5" height="0" width="0"
      style="display:none;visibility:hidden"></iframe></noscript>

  <div id="menu-placeholder"></div>

  <main>
    <section>
      <div class="container">
        <div class="reveal">
          <h4 style="font-size: 14px; color: var(--text-muted); margin-bottom: 20px;">CALENDAR</h4>
          <h1 class="section-title">GIGS & <br>RESIDENCIES</h1>
          <p id="current-month"
            style="font-size: 2.5rem; font-family: var(--font-heading); font-weight: 800; color: var(--accent); margin-bottom: 60px; text-transform: uppercase;">
          </p>
          <script>
            const now = new Date();
            document.getElementById('current-month').textContent = now.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
          </script>
        </div>

        <div class="bento-grid">
          <!-- Drift -->
          <div id="card-drift" class="bento-item reveal" style="grid-column: span 6;">
            <img src="img/driftb.webp" alt="Drift Beach Club" loading="lazy"
              style="width: 100%; height: 300px; object-fit: cover; margin-bottom: 30px;">
            <h3 style="font-size: 2rem; margin-bottom: 10px;">DRIFT BEACH CLUB</h3>
            <p style="color: var(--text-secondary); margin-bottom: 30px;">One&Only Royal Mirage</p>

            <!-- Dynamic Injection Point for Drift -->
            <div id="gigs-drift"
              style="margin-top: 20px; border-top: 1px solid var(--border-subtle); padding-top: 20px;"></div>

            <a href="https://driftbeachdubai.com" target="_blank" class="btn-noir"
              style="width: 100%; justify-content: center; margin-top: 30px;">RESERVE</a>
          </div>

          <!-- Aura -->
          <div id="card-aura" class="bento-item reveal" style="grid-column: span 6;">
            <img src="img/Aura.webp" alt="Aura Skypool" loading="lazy"
              style="width: 100%; height: 300px; object-fit: cover; margin-bottom: 30px;">
            <h3 style="font-size: 2rem; margin-bottom: 10px;">AURA SKYPOOL</h3>
            <p style="color: var(--text-secondary); margin-bottom: 30px;">St. Regis The Palm</p>

            <!-- Dynamic Injection Point for Aura -->
            <div id="gigs-aura"
              style="margin-top: 20px; border-top: 1px solid var(--border-subtle); padding-top: 20px;"></div>

            <a href="https://auraskypool.com/experiences/" target="_blank" class="btn-noir"
              style="width: 100%; justify-content: center; margin-top: 30px;">RESERVE</a>
          </div>

          <!-- Azure -->
          <div id="card-azure" class="bento-item reveal" style="grid-column: span 12;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; align-items: center;">
              <img src="img/azure.webp" alt="Azure Beach Club" loading="lazy"
                style="width: 100%; height: 400px; object-fit: cover;">
              <div>
                <h3 style="font-size: 3rem; margin-bottom: 10px;">AZURE BEACH CLUB</h3>
                <p style="color: var(--text-secondary); margin-bottom: 40px; font-size: 1.25rem;">Rixos Premium JBR</p>

                <!-- Dynamic Injection Point for Azure -->
                <div id="gigs-azure"
                  style="margin-bottom: 30px; border-top: 1px solid var(--border-subtle); padding-top: 20px;"></div>

                <a href="https://www.azure-beach.com/dubai/experiences/" target="_blank" class="btn-noir">BOOK TABLE</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const apiURL = 'https://sunsetdjsnew-production.up.railway.app/api/gigs/?dj=javi';

      const containers = {
        'DRIFT': {
          list: document.getElementById('gigs-drift'),
          card: document.getElementById('card-drift')
        },
        'AURA': {
          list: document.getElementById('gigs-aura'),
          card: document.getElementById('card-aura')
        },
        'AZURE': {
          list: document.getElementById('gigs-azure'),
          card: document.getElementById('card-azure')
        }
      };

      function formatDate(dateString) {
        const options = { weekday: 'short', month: 'short', day: 'numeric' };
        const date = new Date(dateString);
        return date.toLocaleDateString('en-US', options);
      }

      console.log("Gigs system initialized. Fetching:", apiURL);

      fetch(apiURL)
        .then(response => {
          if (!response.ok) throw new Error("API Connection Error: " + response.status);
          return response.json();
        })
        .then(data => {
          console.log("Live Gigs Data:", data);
          if (data && data.length > 0) {
            data.forEach(gig => {
              const venueName = (gig.venue || "").toUpperCase().trim();

              let target = null;
              for (const key in containers) {
                if (venueName.includes(key)) {
                  target = containers[key];
                  break;
                }
              }

              if (target && target.list) {
                const gigElement = document.createElement('div');
                gigElement.style.cssText = 'margin-top: 12px; border-left: 2px solid var(--accent); padding-left: 15px; background: rgba(255,255,255,0.03); padding: 10px 15px; border-radius: 2px;';

                const eventBadge = gig.is_event ? `<span style="background: var(--accent); color: var(--bg-pure); padding: 2px 6px; font-size: 9px; font-weight: 800; text-transform: uppercase; display: inline-block; margin-bottom: 5px;">SPECIAL EVENT</span> ` : '';
                const commentText = gig.comment ? `<span style="color: var(--accent); font-size: 11px; display: block; font-style: italic; margin-top: 4px;">${gig.comment}</span>` : '';

                gigElement.innerHTML = `
                  <div style="display: flex; justify-content: space-between; align-items: baseline;">
                    <span style="font-weight: 700; font-size: 13px; color: var(--text-primary);">${formatDate(gig.date)}</span>
                    <span style="font-size: 11px; color: var(--text-muted);">${gig.time || ''}</span>
                  </div>
                  ${eventBadge}
                  ${commentText}
                `;
                target.list.appendChild(gigElement);
                console.log("Matched & Added gig for:", venueName);
              }
            });
          }
        })
        .catch(error => {
          console.error("Gigs Fetch Error:", error);
          // Cards remain visible with static content even if API fails
        });
    });
  </script>

  <div id="footer-placeholder"></div>

  <script src="assets/js/interactions.js"></script>
</body>

</html>